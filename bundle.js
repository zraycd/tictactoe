(()=>{"use strict";var e={617:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(685);const o=document.querySelector("#normalBtn"),n=document.querySelector("#ultimateBtn"),l=document.querySelector("#resetBtn"),i=new a.A("normal"),s=new a.A("ultimate");let d;i.displayBoard(),d=i,o.addEventListener("click",()=>{d=i,i.winner?document.querySelector(".line").style.display="block":document.querySelector(".line").style.display="none",s.hideBoard(),i.displayBoard()}),n.addEventListener("click",()=>{d=s,s.winner?document.querySelector(".line").style.display="block":document.querySelector(".line").style.display="none",i.hideBoard(),s.displayBoard()}),l.addEventListener("click",()=>{d.winner=!1,d.finalWinner=!1,d.resetBoard(),d.hideBoard(),d.displayBoard()}),document.querySelector(".mainContainer").addEventListener("click",e=>{!function(e,t){if(t.winner&&"normal"===t.type)return;let r,a=JSON.parse(e.getAttribute("data-coordinates")),o=JSON.parse(e.parentElement.getAttribute("data-row")),n=JSON.parse(e.parentElement.getAttribute("data-col"));r=t.moveCount%2==0?"X":"O","normal"!==t.type?JSON.parse(e.parentElement.getAttribute("data-locked"))||t.finalWinner||t.placeMarker(a[0],a[1],t.board[o][n],r,o,n):t.placeMarker(a[0],a[1],t.board,r)}(e.target,d)});const c=d},685:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(617);const o=class{constructor(e){this.type=e,this.board=new Array(3).fill(0).map(()=>new Array(3).fill(0).map(()=>"")),"normal"!==this.type&&(this.board=this.board.map(()=>new Array(3).fill(0).map(()=>new(r(685).A)("normal").board))),this.moveCount=0,this.lastMark=null,this.oldLastMark=null,this.winner=!1,this.finalWinner=!1}getFocus(){return"normal"===a.A.type?this.board:this.board[this.lastMark.row][this.lastMark.col]}},n=class extends o{placeMarker(e,t,r,a,o=null,n=null){""===r[e][t]&&(r[e][t]=a,this.moveCount++,this.lastMark={row:e,col:t},this.checkForWin(r,!1,o,n))}checkForWin(e,t=!1,r,a){const o=[[[0,0],[0,1],[0,2],[0,-25.5,90,1]],[[1,0],[1,1],[1,2],[0,0,90,1]],[[2,0],[2,1],[2,2],[0,25.5,90,1]],[[0,0],[1,0],[2,0],[-25.5,0,0,1]],[[0,1],[1,1],[2,1],[0,0,0,1]],[[0,2],[1,2],[2,2],[25.5,0,0,1]],[[0,0],[1,1],[2,2],[0,0,-45,1.25]],[[0,2],[1,1],[2,0],[0,0,45,1.25]]];for(let n of o){let o=n.slice(0,-1);const[l,i,s]=o;if(""!==e[l[0]][l[1]]&&e[l[0]][l[1]]===e[i[0]][i[1]]&&e[l[0]][l[1]]===e[s[0]][s[1]])return t?void this.displayWinLine(n[3]):("normal"!==this.type&&!this.finalWinner&&this.board[r]&&(this.board[r][a]=this.board[r][a][l[0]][l[1]],this.checkForWin(this.board,!0)),"normal"!==this.type||this.winner||(this.winner=e[l[0]][l[1]],this.displayWinLine(n[3])),n)}return this.hideBoard(),this.displayBoard(),null}},l=class extends n{displayBoard(e=document.querySelector(".mainContainer")){const t=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]];let r=0;"normal"===this.type?this.board.forEach(a=>{a.forEach(a=>{let o=document.createElement("div");o.classList.add("cell"),o.dataset.coordinates=JSON.stringify(t[r]),o.textContent=a,e.appendChild(o),r++})}):(r=0,this.board.forEach(a=>{a.forEach(()=>{let a=document.createElement("div");a.classList.add("container"),a.dataset.row=JSON.stringify(t[r][0]),a.dataset.col=JSON.stringify(t[r][1]),a.dataset.locked=JSON.stringify(!0),a.dataset.win=JSON.stringify(!1),e.appendChild(a),r++})}),this.controlContainers()),this.controlOpacity()}controlContainers(e=document.querySelectorAll(".container"),t=!0){let a=this.lastMark;e.forEach(e=>{let o=new(r(685).A)("normal");if(o.board=this.board[e.dataset.row][e.dataset.col],"string"==typeof o.board?(e.textContent=o.board,e.dataset.win="true",e.style.opacity="0.75",e.classList.remove("container"),e.classList.add("cell")):t&&o.displayBoard(e),null===a)e.dataset.locked="false";else{e.dataset.locked="true";let t=JSON.parse(e.dataset.row)===a.row,r=JSON.parse(e.dataset.col)===a.col,o=JSON.parse(e.dataset.win);t&&r&&!o&&(e.dataset.locked="false"),t&&r&&o&&(a=null,this.unlock())}})}unlock(){document.querySelectorAll(".container").forEach(e=>{e.dataset.locked="false"})}displayWinLine(e){let t=document.querySelector(".line");this.finalWinner=!0,this.winner=!0,window.innerWidth<600&&(e[0]=Number((.6589*e[0]).toFixed(3)),e[1]=Number((.6589*e[1]).toFixed(3)),e[3]=Number((e[3]/3*2).toFixed(2))),console.log(e),this.hideBoard(),this.displayBoard(),t.style.transform=`translate(${e[0]}dvh, ${e[1]}dvh) rotate(${e[2]}deg) scale(1, ${e[3]})`,t.style.display="block",document.querySelectorAll(".container").forEach(e=>{e.classList.remove("locked"),e.classList.add("unlocked")}),document.querySelectorAll(".cell").forEach(e=>{e.classList.remove("locked"),e.classList.add("unlocked")})}hideBoard(e=document.querySelector(".mainContainer")){document.querySelectorAll(".container").forEach(e=>e.remove()),document.querySelectorAll(".cell").forEach(e=>e.remove())}resetBoard(){this.moveCount=0,this.board=new(r(685).A)("normal").board,"normal"!==this.type&&(this.board=new(r(685).A)("ultimate").board,this.lastMark=null),this.winner=null,this.finalWinner=null,document.querySelector(".line").style.display="none"}controlOpacity(){document.querySelectorAll(".container").forEach(e=>{JSON.parse(e.dataset.locked)?e.classList.add("locked"):(e.classList.remove("locked"),e.classList.add("unlocked"))})}},i=class extends l{constructor(e){super(e)}}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(617)})();